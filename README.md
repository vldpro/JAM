# sys_lang_project

Структура виртуальной машины:

  - Контекстный стек ( реализован как связный список ) - хранит структуры типа vm_context_t,
    в которых содержится информация, необходимая для описания контекста исполнения функции.
    
  - Массив функций - массив загруженных из бинарного файла функций.
  
  - Пул констант - массив константных строк.
  
  
    
Контекст исполнения (vm_context_t):

  - Стек вычислений ( обертка над массивом ) - предназначен для передачи операндов командам
    и для приема результатов вычислений команд или функций. Выделяется свой для каждой функции.
    
  - Стек данных ( обертка над массивом ) - предназначен для хранения результатов вычислений.
    Выделяяется свой для каждой функции.
  
  - Счетчик команд
  
  - Указатель на исполняемую функцию
  
  - Указатель на предыдущий контекст исполнения
  
  
Функция (function_t):

  - name ID - смещение в констатном пуле. Указывает на то, где хранится имя функции.
  
  - Кол-во аргументов
  
  - Кол-во загруженных команд
  
  - Команды - байтовый массив. Содержит коды команд.
  
  
 Синтаксис языка Ассемблера:
 
 def - ключевое слово для определения либо функции, либо константы.
    - function имя_функции argc кол_во_аргументов
    - constants 
        "константа"
        "константа"
        ....
        
Каждая функция должна заканчиваться ключевым словом end.

Пример:

def constants 
  "main"
  "hello_world"
  
def function main argc 0 
    push 0
    sprint
    halt
end

Константы можно добавлять в любом месте программы, кроме тела функции.
Пример:

def constants 
  "main"

def function main argc 0
    ...
end

def constants 
  "lalala"
  
Объявление меток:

def function main argc 0
  push 2.09
  store
  loop:
    clreval
    load
    dinc
    push 13.09
    dcmple
    push loop
    branchif
  dprint
  halt
end
    
